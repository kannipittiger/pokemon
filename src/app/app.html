<div class="bg-neutral-100 min-h-screen p-6 flex flex-col gap-6">

  @if (isLoading()) {
    <div class="flex items-center justify-center h-[60vh]">
      <div class="flex flex-col items-center gap-4">
        <div
          class="h-10 w-10 animate-spin rounded-full border-4 border-gray-300 border-t-blue-600"
        ></div>
        <p class="text-gray-600 font-medium">Loading Pok√©mon...</p>
      </div>
    </div>
  }

  @else if (errorMessage()) {
    <div class="flex items-center justify-center h-[60vh]">
      <div class="bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-lg">
        <p class="font-semibold">Something went wrong</p>
        <p class="text-sm mt-1">
          {{ errorMessage() }}
        </p>
      </div>
    </div>
  }

  @else {
    @for (row of chunkedPokemon(); track $index) {

      <div
        class="
          flex flex-nowrap gap-4
          overflow-x-auto overflow-y-hidden
          pb-2
          scroll-smooth
        "
      >
        @for (item of row; track item.name) {
          <div
            class="
              bg-white rounded-xl border
              p-4
              shrink-0
              w-[6.25%] min-w-30

              cursor-pointer
              transition-all duration-200 ease-out
              hover:-translate-y-1
              hover:shadow-lg
              hover:border-blue-400

              group
            "
            (click)="selectedPokemon.set(item)"
          >
            <img
              [src]="item.photo"
              [alt]="item.name"
              class="
                w-20 h-20 mx-auto object-contain
                transition-transform duration-200
                group-hover:scale-110
              "
            />

            <h2
              class="
                mt-3 text-center font-bold capitalize
                text-gray-900 text-sm
                transition-colors
                group-hover:text-blue-600
              "
            >
              {{ item.name }}
            </h2>

            <div class="mt-3">
              <p
                class="
                  text-xs font-semibold text-gray-500 mb-1 text-center
                "
              >
                Abilities
              </p>

              <ul class="space-y-1">
                @for (skill of item.skills; track $index) {
                  <li
                    class="
                      text-[10px] text-gray-700
                      bg-gray-100 rounded
                      px-2 py-0.5
                      text-center capitalize

                      transition
                      group-hover:bg-blue-50
                    "
                  >
                    {{ skill.name }}
                  </li>
                }
              </ul>
            </div>
          </div>
        }
      </div>
    }
  }
</div>

<app-pokemon-detail-modal
  *ngIf="selectedPokemon()"
  [pokemon]="selectedPokemon()!"
  (close)="selectedPokemon.set(null)"
></app-pokemon-detail-modal>
